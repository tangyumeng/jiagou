# 项目目录结构说明

## 📁 按功能组织的目录结构

项目已按功能模块重新组织，每个功能都有独立的目录，便于维护和扩展。

```
jiagou/
├── Core/                           # 应用核心
│   ├── AppDelegate.swift          # 应用启动入口
│   ├── SceneDelegate.swift        # 场景管理
│   └── Home/                      # 主页模块
│       └── HomeViewController.swift
│
├── Architecture/                   # 架构模式
│   ├── MVVM/                      # MVVM架构实现
│   │   ├── MVVMDemoViewController.swift
│   │   ├── MVVMUserModel.swift
│   │   ├── MVVMUserView.swift
│   │   ├── MVVMUserViewModel.swift
│   │   └── CustomBinding.swift    # 自定义数据绑定
│   │
│   └── MVP/                       # MVP架构实现
│       ├── MVPDemoViewController.swift
│       ├── MVPTaskDetailViewController.swift
│       ├── MVPTaskModel.swift
│       ├── MVPTaskPresenter.swift
│       └── MVPTaskView.swift
│
├── Frameworks/                     # 基础框架
│   ├── Router/                    # 路由框架
│   │   ├── Router.swift           # 路由核心
│   │   ├── RoutePages.swift       # 路由页面定义
│   │   ├── RouteDataCache.swift   # 路由数据缓存
│   │   └── RouterDemoViewController.swift
│   │
│   ├── EventBus/                  # 事件总线
│   │   ├── EventBus.swift         # 事件总线核心
│   │   └── EventBusExample.swift  # 使用示例
│   │
│   ├── Logger/                    # 日志框架
│   │   ├── Logger.swift           # 日志核心
│   │   └── LoggerDemoViewController.swift
│   │
│   ├── DownloadManager/           # 下载管理器
│   │   ├── DownloadManager.swift  # 下载管理核心
│   │   ├── DownloadTask.swift     # 下载任务模型
│   │   ├── DownloadTaskCell.swift # 任务列表Cell
│   │   └── DownloadTaskPersistence.swift  # 持久化
│   │
│   └── ImageLoader/               # 图片加载框架
│       ├── ImageLoader.swift      # 图片加载器
│       └── ImageCacheManager.swift # 缓存管理
│
├── Modules/                        # 业务模块
│   ├── ModuleManager.swift        # 模块管理器
│   ├── ModuleProtocol.swift       # 模块协议
│   ├── UserModule.swift           # 用户模块
│   ├── ProductModule.swift        # 产品模块
│   └── ModuleDemoViewController.swift
│
├── Resources/                      # 资源文件
│   ├── Assets.xcassets/           # 图片资源
│   ├── Base.lproj/                # 本地化资源
│   └── Info.plist                 # 配置文件
│
└── ViewController.swift            # 旧的主控制器（待整合）

```

## 🎯 目录说明

### Core - 应用核心
包含应用的启动文件和主页面，是整个应用的入口。

**核心文件：**
- `AppDelegate.swift` - 应用生命周期管理
- `SceneDelegate.swift` - 多场景支持
- `HomeViewController.swift` - 主页导航

### Architecture - 架构模式
展示不同的架构设计模式实现，包括MVVM和MVP。

**MVVM特点：**
- 数据绑定自动更新UI
- ViewModel不依赖UIKit，易于测试
- Model、View、ViewModel职责清晰

**MVP特点：**
- Presenter处理所有业务逻辑
- View完全被动，只负责显示
- 更易于单元测试

### Frameworks - 基础框架
提供可复用的基础功能框架，每个框架都是独立的。

**六大框架：**
1. **Router** - URL路由系统，支持页面跳转和参数传递
2. **EventBus** - 事件总线，组件间解耦通信
3. **Logger** - 日志系统，支持多级别和多输出目标
4. **DownloadManager** - 下载管理，支持并发、断点续传
5. **ImageLoader** - 图片加载，三级缓存和防重复下载

### Modules - 业务模块
按业务功能划分的模块，支持模块化开发和动态加载。

**模块化优势：**
- 业务逻辑独立
- 可按需加载
- 便于团队协作
- 支持热更新

### Resources - 资源文件
存放所有静态资源和配置文件。

## 📋 迁移说明

### 文件移动清单

**Core:**
- `AppDelegate.swift` → `Core/`
- `SceneDelegate.swift` → `Core/`
- `HomeViewController.swift` → `Core/Home/`

**Architecture:**
- `MVVM*.swift` → `Architecture/MVVM/`
- `CustomBinding.swift` → `Architecture/MVVM/`
- `MVP*.swift` → `Architecture/MVP/`

**Frameworks:**
- `Router*.swift`, `Route*.swift` → `Frameworks/Router/`
- `EventBus*.swift` → `Frameworks/EventBus/`
- `Logger*.swift` → `Frameworks/Logger/`
- `Download*.swift` → `Frameworks/DownloadManager/`
- `Image*.swift` → `Frameworks/ImageLoader/`

**Modules:**
- `Module*.swift`, `*Module.swift` → `Modules/`

**Resources:**
- `Assets.xcassets/` → `Resources/`
- `Base.lproj/` → `Resources/`
- `Info.plist` → `Resources/`

## 🔧 Xcode项目配置

### 重要提示
文件移动后，需要在Xcode中更新文件引用：

1. **打开项目**
   ```bash
   open jiagou.xcodeproj
   ```

2. **更新文件引用**
   - 在Xcode左侧项目导航器中删除红色的文件引用
   - 右键点击 `jiagou` 组 → `Add Files to "jiagou"`
   - 选择移动后的目录，勾选 "Create groups"
   - 点击 "Add" 添加

3. **更新Info.plist路径**
   - 选择项目根节点 → 选择Target → Build Settings
   - 搜索 "Info.plist"
   - 将路径更新为 `jiagou/Resources/Info.plist`

4. **清理构建**
   ```
   Product → Clean Build Folder (⇧⌘K)
   ```

5. **重新构建**
   ```
   Product → Build (⌘B)
   ```

## 🎨 优势

### 1. 清晰的职责划分
每个目录都有明确的职责，代码组织更清晰。

### 2. 易于维护
相关功能的代码集中在一起，便于查找和修改。

### 3. 便于扩展
新增功能时，只需在对应目录下添加文件即可。

### 4. 团队协作友好
不同模块可以由不同人员负责，减少代码冲突。

### 5. 支持模块化
每个框架都可以独立提取成独立的库或Framework。

## 📚 使用建议

### 添加新功能
1. **新框架** → 在 `Frameworks/` 下创建新目录
2. **新架构** → 在 `Architecture/` 下创建新目录
3. **新模块** → 在 `Modules/` 下添加新文件
4. **新资源** → 放入 `Resources/` 目录

### 代码规范
- 每个功能模块保持独立，避免循环依赖
- 框架层不应该依赖业务层
- 使用协议进行模块间通信
- 遵循单一职责原则

## 🔄 后续优化

### 建议的改进方向：
1. [ ] 将 `ViewController.swift` 重构或移除
2. [ ] 考虑引入 CocoaPods 或 SPM 管理依赖
3. [ ] 为每个框架添加单元测试
4. [ ] 创建 Framework Target 实现真正的模块化
5. [ ] 添加代码规范和 SwiftLint 配置

## 📖 相关文档

- [项目概览](./项目概览.md)
- [快速入门](./快速入门.md)
- [架构分析](./架构分析.md)
- [所有演示汇总](./所有演示汇总.md)

---

**更新时间：** 2025年10月20日
**版本：** v2.0 - 按功能模块重组
